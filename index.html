<!DOCTYPE html>
<html ng-app="Vlctechhub">
    <head>
      <meta charset="UTF-8"/>
      <title>VLC Tech Hub - El hub de los eventos tecnológicos de Valencia</title>
      <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.4.1/pure-min.css">
      <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'>
      <link rel="stylesheet" href="css/style.css">

      <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.12/angular.js"></script>

      <script>
          var app = angular.module('Vlctechhub', []);
          app.factory('EventsFactory', function($http){
              var baseUrl = 'http://api.vlctechhub.org/v0';
              var get = function(url) { return $http.get(baseUrl + url);}
              return {
                  getUpcoming: function(){ return get('/events/upcoming'); },
                  getPast: function(){ return get('/events/past'); }
              };
          });
          app.controller('EventsController', function($scope, EventsFactory){
              EventsFactory.getUpcoming().success(function(data){
                 $scope.upcoming = data;
              });
              EventsFactory.getPast().success(function(data){
                 $scope.past = data.slice(0,9); //TODO: paginate instead of forcing last nine
              });
          });
      </script>

    </head>

    <body>

      <div class="main">

        <div class="header"><img style="width:30%" src="http://vlctechhub.org/img/title.png" alt="VLCTechhub" title="VLCTechhub"/></div>

        <div class="content" ng-controller="EventsController">

            <h3>Próximos eventos<span class="caret blink">&nbsp;</span></h3>

            <div id="events" class="pure-g-r">
                <div class="pure-u-1-2" ng-repeat="event in upcoming" ng-if="upcoming">
                    <div class="event">
                        <div class="title"><a href="{{event.link}}" target="_blank" title="">{{event.title}}</a></div>
                        <div class="date">{{event.date | date:'dd.MM.yy - HH:mm'}}</div>
                        <div class="summary"><p>{{event.description}}</p>
                        <div class="more">
                        <a class="pure-button" href="{{event.link}}" target="_blank">Ver más</a></div>
                        </div>
                    </div>
                </div>

                <div class="pure-u-1-2">
                    <div class="event new-event">
                <div class="title"><a href="#">¿Organizas un evento?</a></div>
                <div class="date">xx.xx.xx</div>
                <div class="summary">Si organizas un <strong>evento</strong>, taller, charla o quedada informal para fomentar una comunidad o compartir información de base <strong>tecnológica</strong>. Si es un evento <strong>gratuito</strong> o de pago para cubrir costes. Si ocurre en Valencia o Castellón. Si quieres formar parte de <strong>VlcTechHub</strong> da de alta tu evento.</div>
                <div class="add-event"><a class="pure-button pure-button-primary" href="https://docs.google.com/spreadsheet/viewform?formkey=dC1oSU1qMzBZYUwxbWY2T0JUZjVvc3c6MQ#gid=0">¡Añadir mi evento!</a></div>
                </div>

                </div>
            </div> <!-- end grid future events -->

            <h3>Eventos pasados<span class="caret blink">&nbsp;</span></h3>

            <div class="note">Eventos pasados - sólo se están mostrando los últimos nueve</div>
            <div id="events" class="pure-g-r">
                <div class="pure-u-1-2" ng-repeat="event in past" ng-if="past">
                    <div class="event">
                        <div class="title"><a href="{{event.link}}" target="_blank" title="">{{event.title}}</a></div>
                        <div class="date">{{event.date | date:'dd.MM.yy - HH:mm'}}</div>
                        <div class="summary"><p>{{event.description}}</p>
                        <div class="more">
                        <a class="pure-button" href="{{event.link}}" target="_blank">Ver más</a></div>
                        </div>
                    </div>
                </div>
              </div> <!-- end grid past events -->

        </div> <!-- end content -->

      </div> <!-- end main -->

    </body>

</html>
